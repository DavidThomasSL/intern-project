<div class="container">
    <div class="header clearfix">
        <h1>ROOM CODE: {{roomId()}}</h1>
        <h4>Give this code to your friends to join and set the game parameters. <br/> Click ready when your want to start!</h4>
        <div style="margin-top: 30px;" class="flex flex-row">
            <div class="flex1">
                <div class="btn-group">
                    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" id="set-bot-dropdown">
                    {{getGameParameters().botNumber}} Bots <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" id="bot-select-dropdown">
                        <li><a ng-click="setBotNumber(0)">None</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a ng-click="setBotNumber(1)">1</a></li>
                        <li><a ng-click="setBotNumber(2)">2</a></li>
                        <li><a ng-click="setBotNumber(3)">3</a></li>
                        <li><a ng-click="setBotNumber(4)">4</a></li>
                        <li><a ng-click="setBotNumber(5)">5</a></li>
                        <li><a ng-click="setBotNumber(6)">6</a></li>
                    </ul>
                </div>
            </div>
            <div class="flex1">
                <div class="btn-group">
                    <button type="button" class="btn btn-default dropdown-toggle flex1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" id="set-round-dropdown">
                    {{getGameParameters().numRounds}} Rounds <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" id="round-select-dropdown">
                        <li><a ng-click="setRoundNumber(1)">1</a></li>
                        <li><a ng-click="setRoundNumber(2)">2</a></li>
                        <li><a ng-click="setRoundNumber(3)">3</a></li>
                        <li><a ng-click="setRoundNumber(5)">5</a></li>
                        <li><a ng-click="setRoundNumber(8)">8 (Default)</a></li>
                        <li><a ng-click="setRoundNumber(13)">13</a></li>
                        <li><a ng-click="setRoundNumber(21)">21</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div id="room-lobby-container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center" ng-repeat="user in getUsersInRoom()">
                <ng-include src="'includes/templates/user/userPanelLarge.html'"></ng-include>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <div class="panel panel-default" style="height: 200px; overflow-y: scroll;" scroll="getMessages()">
                    <table>
                        <tr ng-repeat="message in getMessages()" style="padding-bottom: 20px ">
                            <td style="font-weight:bold; margin: 80px; padding-left: 20px; padding-right: 10px; width: 20%"><div ng-hide="message.playerUid === getUserId()" style="right: 0px">{{message.playerName}}</div></td>
                            <td style="width: 500px"><div class="form-control" ng-class="{'float-right': message.playerUid === getUserId(), 'float-left': message.playerUid !== getUserId()};" style="white-space: pre-wrap;white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word;  margin-bottom: 5px; height: 100%; ">{{message.messageText}}</div></td>
                            <td style="font-weight:bold; margin: 80px; padding-left: 20px; padding-right: 10px; right: 0; width: 20%"><div ng-show="message.playerUid === getUserId()">{{message.playerName}}</div></td>
                        </tr><br>
                    </table>
                </div>
            </div>
            <form name="message-form" ng-submit="sendMessage(messageText)" class="form-inline">
                <input type="text" class="form-control" id="message-box" placeholder="Type a message" ng-model="messageText" autofocus required style="width: 80%">
                <button type="submit" id="submit-message" class="btn btn-default" style="width: 18%">Send</button>
            </form>
        </div>

        <div class="row">
            <div class="col-md-12 text-center">
                <button id="ready-button" type="button" class="btn btn-lg btn-primary ready-button" ng-click="sendReadyStatus(); roomReadyToggle=(!roomReadyToggle);" ng-class="{'btn-danger':roomReadyToggle}" ng-disabled="getRoomUserCount() < 2 && getBotNumber() < 1">{{ roomReadyToggle ? 'Not Ready' : 'Ready' }}</button>
            </div>
        </div>

        <div class="row text-center">
            <h4 ng-show="getRoomUserCount() < 2 && getBotNumber() < 1">You need at least 2 players to start!</h4>
            <h4 ng-show="getRoomUserCount() < 2 && getBotNumber() >= 1">Wow, look at all the friends you have...</h4>
            <h4 ng-hide="getRoomUserCount() < 2">The game will start when everyone is ready </h4>
        </div>

        <div class="row bottom-buttons">
            <div class="col-md-12 text-center">
                <button id="leave-lobby-button" type="button" class="btn btn-lg btn-danger" ng-click="leaveRoom()" >Go Back</button>
            </div>
        </div>
    </div>
    </div> <!-- /container -->
</div>
